runs:
  using: "composite"
  steps:
    - name: 🛠️Install system dependencies
      run: |
        sudo apt update
        sudo apt install -y clang libclang-dev
        # libopencv-dev
      shell: bash

    - name: 🔧 Install vcpkg
        run: |
          git clone https://github.com/microsoft/vcpkg.git
          ./vcpkg/bootstrap-vcpkg.sh

      - name: 🔧 Install OpenCV using vcpkg
        run: |
          ./vcpkg/vcpkg install opencv4

      - name: 🔧 Set up environment variables
        run: |
          echo "VCPKG_ROOT=$(pwd)/vcpkg" >> $GITHUB_ENV
          echo "PKG_CONFIG_PATH=$(pwd)/vcpkg/installed/x64-linux/lib/pkgconfig" >> $GITHUB_ENV
          echo "OpenCV_DIR=$(pwd)/vcpkg/installed/x64-linux/share/opencv" >> $GITHUB_ENV


    - name: 🔧 Install Rust (Stable)
      run: |
        curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh -s -- -y
      shell: bash

    - name: 💾 Rust Cache
      uses: Swatinem/rust-cache@v2
